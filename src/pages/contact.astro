---
import Container from "@components/container.astro";
import Sectionhead from "@components/sectionhead.astro";
import Layout from "@layouts/Layout.astro";
import { Icon } from "astro-icon/components";
---

<Layout title="Contact">
  <Container>
    <Sectionhead>
      <Fragment slot="title">Tell Us About Your Project</Fragment>
      <Fragment slot="desc">
        The more details you share, the faster we’ll be able to formulate a quote.
      </Fragment>
    </Sectionhead>

    <div class="grid md:grid-cols-2 gap-10 mx-auto max-w-5xl mt-16">
      <div>
        <form action="https://api.web3forms.com/submit" method="POST" class="space-y-5" id="contactForm">
          <input type="hidden" name="access_key" value="5aad919e-be61-4bf1-8e8b-76d4eafc5917" />
          <input type="hidden" name="subject" value="New Contact Form Submission from Heyl Productions Website" />
          <input type="hidden" name="from_name" value="Heyl Productions Contact Form" />
          <input type="checkbox" name="botcheck" class="hidden" style="display: none;" />
          <div>
            <label for="name" class="block text-gray-700 font-medium mb-1">Name</label>
            <input type="text" id="name" name="name" required class="w-full border rounded px-3 py-2" placeholder="John Doe" />
          </div>
          <div>
            <label for="email" class="block text-gray-700 font-medium mb-1">Email</label>
            <input type="email" id="email" name="email" required class="w-full border rounded px-3 py-2" placeholder="john@email.com" />
          </div>
          <div>
            <label for="phone" class="block text-gray-700 font-medium mb-1">Phone</label>
            <input type="tel" id="phone" name="phone" class="w-full border rounded px-3 py-2" placeholder="(555) 123-4567" />
          </div>
          <div>
            <label for="company" class="block text-gray-700 font-medium mb-1">Company/Organization Name</label>
            <input type="text" id="company" name="company" class="w-full border rounded px-3 py-2" placeholder="Heyl Productions" />
          </div>
          <div>
            <label for="location" class="block text-gray-700 font-medium mb-1">Location (address, city, or zip code)</label>
            <input type="text" id="location" name="location" class="w-full border rounded px-3 py-2" placeholder="Poway, CA or 92064" />
          </div>
          <div>
            <label for="eventDate" class="block text-gray-700 font-medium mb-1">Event Date (if applicable)</label>
            <input type="date" id="eventDate" name="eventDate" class="w-full border rounded px-3 py-2" placeholder="2025-09-15" />
          </div>
          <div>
            <label for="message" class="block text-gray-700 font-medium mb-1">Additional Comments/Message</label>
            <textarea id="message" name="message" rows="4" class="w-full border rounded px-3 py-2" placeholder="Share any details or questions here..."></textarea>
          </div>
          <button type="submit" class="w-full bg-black text-white py-2 rounded hover:bg-gray-800 transition font-semibold">Submit</button>
          <p id="successMessage" class="text-green-700 text-center mt-2 hidden">Thanks for submitting! We'll get back to you within 24 hours.</p>
        </form>
      </div>
      <div class="flex flex-col h-full">
        <div>
          <h2 class="font-medium text-2xl text-gray-800 mb-2">Direct Contact Info</h2>
          <p class="text-lg leading-relaxed text-slate-500 mb-2">
            For availability or urgent requests, feel free to call or email directly.
          </p>
          <div class="flex items-center space-x-2 text-gray-600 mb-2">
            <Icon class="text-gray-400 w-4 h-4" name="uil:phone" />
            <span>(858) 774-8569</span>
          </div>
          <div class="flex items-center space-x-2 text-gray-600 mb-2">
            <Icon class="text-gray-400 w-4 h-4" name="uil:envelope" />
            <a href="mailto:erick@heylproductions.com">erick@heylproductions.com</a>
          </div>
          <div class="flex items-center space-x-2 text-gray-600 mb-2">
            <Icon class="text-gray-400 w-4 h-4" name="uil:envelope" />
            <a href="mailto:samantha@heylproductions.com">samantha@heylproductions.com</a>
          </div>
        </div>
        <div class="mt-6"> {/* Increased margin-top from mt-2 to mt-6 for more space */}
          <h3 class="font-medium text-lg text-gray-800 mb-1">Service Area</h3>
          <p class="text-slate-500">
            Heyl Productions is based in Poway, CA. We’re happy to venture anywhere in the greater San Diego area and beyond. Longer travels are available but may affect your final quote.
          </p>
        </div>
      </div>
    </div>
  </Container>

  <footer class="bg-white text-black py-16 mt-12">
    <Container>
      <div class="flex flex-col md:flex-row items-center justify-center gap-8 w-full max-w-4xl mx-auto">
        <div class="w-full md:w-auto text-center md:text-left">
          <span class="font-light">Service Area:</span> Proudly serving Poway, Greater San Diego, and beyond.
        </div>
        <nav class="flex gap-6 w-full md:w-auto justify-center">
          <a href="/service" class="hover:underline">Services</a>
          <a href="/about" class="hover:underline">About</a>
          <a href="/portfolio" class="hover:underline">Portfolio</a>
          <a href="/contact" class="hover:underline">Contact</a>
        </nav>
        <div class="flex gap-3 justify-center w-full md:w-auto">
          <a href="https://instagram.com/heylproductions" aria-label="Instagram" target="_blank" rel="noopener">
            <Icon name="mdi:instagram" class="w-6 h-6" />
            <span class="sr-only">@heylproductions</span>
          </a>
          <a href="#" aria-label="Facebook"><Icon name="mdi:facebook" class="w-6 h-6" /></a>
          <a href="#" aria-label="YouTube"><Icon name="mdi:youtube" class="w-6 h-6" /></a>
          <a 
            href="mailto:erick@heylproductions.com,samantha@heylproductions.com" 
            aria-label="Email Erick and Samantha" 
            target="_blank" 
            rel="noopener"
          >
            <Icon name="mdi:email" class="w-6 h-6" />
            <span class="sr-only">Email Erick and Samantha</span>
          </a>
        </div>
      </div>
    </Container>
  </footer>
</Layout>

<script>
  const form = document.getElementById('contactForm') as HTMLFormElement;
  const successMessage = document.getElementById('successMessage');
  
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(form);
      const button = form.querySelector('button[type="submit"]') as HTMLButtonElement;
      const originalText = button.textContent;
      
      // Disable button and show loading state
      button.disabled = true;
      button.textContent = 'Sending...';
      
      try {
        const response = await fetch('https://api.web3forms.com/submit', {
          method: 'POST',
          body: formData
        });
        
        const data = await response.json();
        
        if (data.success) {
          // Show success message
          if (successMessage) {
            successMessage.classList.remove('hidden');
            successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
          // Reset form
          form.reset();
        } else {
          alert('Oops! Something went wrong. Please try again or email us directly at erick@heylproductions.com');
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Oops! Something went wrong. Please try again or email us directly at erick@heylproductions.com');
      } finally {
        // Re-enable button
        button.disabled = false;
        button.textContent = originalText;
      }
    });
  }
</script>
